<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - TKĐK Admin</title>  <link rel="stylesheet" href="/public/css/stylesAdmin.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/public/js/code.js"></script>
  <script src="/public/js/adminAuth.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.all.min.js"></script>
  <style>
    /* CSS cho khu vực thông báo */
    .notifications-area {
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      margin: 1rem 2rem;
      overflow: hidden;
    }
    
    .notifications-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      background-color: #f9fafb;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .notifications-header h4 {
      margin: 0;
      font-size: 1.1rem;
      font-weight: 600;
      color: #1f2937;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .notification-count {
      background-color: #ef4444;
      color: white;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 0.25rem 0.5rem;
      border-radius: 9999px;
      min-width: 1.5rem;
      text-align: center;
    }
    
    .notifications-list {
      max-height: 400px;
      overflow-y: auto;
      padding: 0.5rem 0;
    }
    
    .notification-item {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid #f3f4f6;
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      transition: background-color 0.2s;
      cursor: pointer;
    }
    
    .notification-item:hover {
      background-color: #f9fafb;
    }
    
    .notification-item.unread {
      background-color: #f0f9ff;
    }
    
    .notification-item.unread:hover {
      background-color: #e0f2fe;
    }
    
    .notification-icon {
      width: 40px;
      height: 40px;
      background-color: #4f46e5;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      flex-shrink: 0;
    }
    
    .notification-icon.car-approval {
      background-color: #f59e0b;
    }
    
    .notification-icon.system {
      background-color: #4f46e5;
    }
    
    .notification-icon.report {
      background-color: #ef4444;
    }
    
    .notification-icon.car-registration {
      background-color: #3b82f6;
    }
    
    .notification-content {
      flex-grow: 1;
    }
    
    .notification-title {
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 0.25rem;
    }
    
    .notification-message {
      color: #6b7280;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }
    
    .notification-time {
      color: #9ca3af;
      font-size: 0.75rem;
    }
    
    .notification-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }
    
    .notification-action-btn {
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 500;
      cursor: pointer;
      border: none;
      transition: all 0.2s;
    }
    
    .btn-approve {
      background-color: #10b981;
      color: white;
    }
    
    .btn-approve:hover {
      background-color: #059669;
    }
    
    .btn-reject {
      background-color: #f43f5e;
      color: white;
    }
    
    .btn-reject:hover {
      background-color: #e11d48;
    }
    
    .btn-view {
      background-color: #f3f4f6;
      color: #374151;
    }
    
    .btn-view:hover {
      background-color: #e5e7eb;
    }
    
    .loading-spinner {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      color: #6b7280;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .no-notifications {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      color: #6b7280;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .no-notifications i {
      font-size: 2rem;
      color: #9ca3af;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="header-inner">
      <div class="logo-header">
        <a href="/public/index.html">
        <img src="../public/image/AutomotiveCar.png" alt="TKĐK Admin" />
        </a>
      </div>
      <ul class="menu">
        <li><a href="AdminTrangChu.html" class="active"><i class="fas fa-chart-line"></i> Thống Kê</a></li>
        <li><a href="AdminQuanLyKH.html"><i class="fas fa-users"></i> Quản Lý Khách Hàng</a></li>
        <li><a href="AdminQLXe.html"><i class="fas fa-car"></i> Quản Lý Xe</a></li>
        <li><a href="AdminQuanLyNguoiDung.html"><i class="fas fa-user-cog"></i> Quản Lý Người Dùng</a></li>
        <li><a href="AdminGiaoDich.html"><i class="fas fa-exchange-alt"></i> Quản Lý Giao Dịch</a></li>
        <li><a href="AdminVoucher.html"><i class="fas fa-ticket-alt"></i> Quản Lý Voucher</a></li>
        <li><a href="AdminQuanLyLienHe.html"><i class="fas fa-envelope"></i> Quản Lý Liên hệ</a></li>
        <li><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Đăng Xuất</a></li>
      </ul>
    </div>
  </div>

  <div class="dashboard">
    <div class="card">
      <h3>Doanh Thu Tháng</h3>
      <p>68.6M <i class="fas fa-coins"></i></p>
      <div class="card-trend up">
        <i class="fas fa-arrow-up"></i>
        <span>+12% so với tháng trước</span>
      </div>
    </div>
    <div class="card">
      <h3>Số Lượt Thuê</h3>
      <p>24 <i class="fas fa-car-side"></i></p>
      <div class="card-trend up">
        <i class="fas fa-arrow-up"></i>
        <span>+8 lượt so với tháng trước</span>
      </div>
    </div>
    <div class="card">
      <h3>Khách Hàng Mới</h3>
      <p>12 <i class="fas fa-users"></i></p>
      <div class="card-trend up">
        <i class="fas fa-arrow-up"></i>
        <span>+5 khách hàng tuần này</span>
      </div>
    </div>
    <div class="card">
      <h3>Tỷ Lệ Hoàn Thành</h3>
      <p>95% <i class="fas fa-check-circle"></i></p>
      <div class="card-trend up">
        <i class="fas fa-arrow-up"></i>
        <span>+2% so với tháng trước</span>      </div>
    </div>  </div>
  
  <!-- Khu vực hiển thị thông báo -->
  <div class="notifications-area">
    <div class="notifications-header">
      <h4>
        <i class="fas fa-bell"></i>
        Thông Báo Mới
        <span class="notification-count" id="notificationCount">0</span>
      </h4>
      <button id="markAllReadBtn" class="notification-action-btn btn-view">
        <i class="fas fa-check-double"></i> Đánh dấu tất cả đã đọc
      </button>
    </div>
    <div class="notifications-list" id="notificationsList">
      <!-- Hiển thị loading khi đang tải thông báo -->
      <div class="loading-spinner" id="notificationsLoading">
        <i class="fas fa-circle-notch fa-spin fa-2x"></i>
        <span>Đang tải thông báo...</span>
      </div>
      
      <!-- Hiển thị khi không có thông báo -->
      <div class="no-notifications" id="noNotifications" style="display: none;">
        <i class="fas fa-bell-slash"></i>
        <span>Không có thông báo mới</span>
      </div>
      
      <!-- Các thông báo sẽ được thêm vào đây qua JavaScript -->
    </div>
  </div>
  
  <div class="table-area">
    <div>
      <div class="table-header">
        <h4>Danh Sách Cho Thuê Xe Hôm Nay</h4>
        <div class="table-actions">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Tìm kiếm...">
          </div>
          <button class="btn-export">
            <i class="fas fa-download"></i>
            Xuất Excel
          </button>
        </div>
      </div>
      <table>
        <thead>
          <tr>
            <th>STT</th>
            <th>Xe</th>
            <th>Khách hàng</th>
            <th>Thời gian</th>
            <th>Thành tiền</th>
            <th>Trạng thái</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>
              <div class="car-info">
                <img src="https://i.imgur.com/qbT8JmH.jpg" alt="Mercedes" class="car-img">
                <span>Mercedes C200</span>
              </div>
            </td>
            <td>
              <div class="customer-info">
                <img src="https://ui-avatars.com/api/?name=Minh+Nhự&background=4f46e5&color=fff" alt="Avatar" class="avatar">
                <div>
                  <p class="customer-name">Minh Nhự</p>
                  <small class="customer-id">KH001</small>
                </div>
              </div>
            </td>
            <td>08:00 - 17:00</td>
            <td class="price">6,200,000đ</td>
            <td><span class="status-badge completed">Đã hoàn thành</span></td>
          </tr>
          <tr>
            <td>2</td>
            <td>
              <div class="car-info">
                <img src="https://i.imgur.com/3lGGgzr.jpg" alt="Audi" class="car-img">
                <span>Audi A5</span>
              </div>
            </td>
            <td>
              <div class="customer-info">
                <img src="https://ui-avatars.com/api/?name=Văn+An&background=4f46e5&color=fff" alt="Avatar" class="avatar">
                <div>
                  <p class="customer-name">Văn An</p>
                  <small class="customer-id">KH002</small>
                </div>
              </div>
            </td>
            <td>09:30 - 16:30</td>
            <td class="price">5,800,000đ</td>
            <td><span class="status-badge pending">Đang thuê</span></td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <div class="table-right">
      <div class="table-header">
        <h4>Thống Kê Doanh Thu</h4>
        <select class="time-filter" id="revenueTimeFilter">
          <option value="week">Tuần này</option>
          <option value="month" selected>Tháng này</option>
          <option value="year">Năm nay</option>
        </select>
      </div>
      <div class="chart-container" style="position: relative; height: 300px; margin-bottom: 2rem;">
        <canvas id="revenueChart"></canvas>
      </div>

      <div class="table-header">
        <h4>Top Xe Cho Thuê Nhiều Nhất</h4>
        <select class="time-filter">
          <option value="week">Tuần này</option>
          <option value="month" selected>Tháng này</option>
          <option value="year">Năm nay</option>
        </select>
      </div>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Tên xe</th>
            <th>Số lần</th>
            <th>Tỷ lệ</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><div class="rank rank-1">1</div></td>
            <td>Mercedes C200</td>
            <td>8 lần</td>
            <td>42.8%</td>
          </tr>
          <tr>
            <td><div class="rank rank-2">2</div></td>
            <td>Audi A5</td>
            <td>6 lần</td>
            <td>28.6%</td>
          </tr>
          <tr>
            <td><div class="rank rank-3">3</div></td>
            <td>BMW 530i</td>
            <td>4 lần</td>
            <td>14.3%</td>
          </tr>
          <tr>
            <td><div class="rank">4</div></td>
            <td>Vinfast VF8</td>
            <td>2 lần</td>
            <td>14.3%</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    // Revenue Chart
    const revenueCtx = document.getElementById('revenueChart').getContext('2d');
    const revenueChart = new Chart(revenueCtx, {
      type: 'line',
      data: {
        labels: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'],
        datasets: [{
          label: 'Doanh thu (triệu đồng)',
          data: [12, 19, 15, 17, 22, 25, 18],
          fill: true,
          borderColor: '#4f46e5',
          backgroundColor: 'rgba(79, 70, 229, 0.1)',
          tension: 0.4
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            grid: {
              display: true,
              color: 'rgba(0, 0, 0, 0.05)'
            }
          },
          x: {
            grid: {
              display: false
            }
          }
        }
      }
    });

    // Handle active menu item
    document.querySelectorAll('.menu a').forEach(link => {
      if (link.getAttribute('href') === location.pathname.split('/').pop()) {
        link.classList.add('active');
      }
    });

    // Handle logout
    document.getElementById('logoutBtn').addEventListener('click', (e) => {
      e.preventDefault();
      if (confirm('Bạn có chắc muốn đăng xuất?')) {
        window.location.href = 'AdminLogin.html';
      }
    });

    // Handle table search
    const searchInput = document.querySelector('.search-box input');
    searchInput.addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase();
      const rows = document.querySelectorAll('tbody tr');
      
      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(searchTerm) ? '' : 'none';
      });
    });

    // Handle time filter changes
    document.querySelectorAll('.time-filter').forEach(filter => {
      filter.addEventListener('change', (e) => {
        const timeFrame = e.target.value;
        // Update relevant data based on selected time frame
      });
    });    // Export functionality
    document.querySelector('.btn-export').addEventListener('click', () => {
      alert('Đang xuất dữ liệu...');
      // Implement export logic
    });
    
    // Xử lý thông báo
    let notificationsData = [];
    
    // Hàm format thời gian thông báo
    function formatNotificationTime(dateString) {
      const date = new Date(dateString);
      const now = new Date();
      const diffTime = Math.abs(now - date);
      const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
      const diffHours = Math.floor(diffTime / (1000 * 60 * 60));
      const diffMinutes = Math.floor(diffTime / (1000 * 60));
      
      if (diffDays > 0) {
        return `${diffDays} ngày trước`;
      } else if (diffHours > 0) {
        return `${diffHours} giờ trước`;
      } else if (diffMinutes > 0) {
        return `${diffMinutes} phút trước`;
      } else {
        return 'Vừa xong';
      }
    }
    
    // Hàm lấy icon class dựa vào loại thông báo
    function getNotificationIconClass(type) {
      switch (type) {
        case 'car_registration':
          return 'car-registration';
        case 'car_approval':
          return 'car-approval';
        case 'report':
          return 'report';
        default:
          return 'system';
      }
    }
    
    // Hàm lấy icon dựa vào loại thông báo
    function getNotificationIcon(type) {
      switch (type) {
        case 'car_registration':
          return '<i class="fas fa-car-side"></i>';
        case 'car_approval':
          return '<i class="fas fa-check-circle"></i>';
        case 'car_rejection':
          return '<i class="fas fa-times-circle"></i>';
        case 'report':
          return '<i class="fas fa-flag"></i>';
        default:
          return '<i class="fas fa-bell"></i>';
      }
    }
    
    // Hàm hiển thị thông báo
    function renderNotifications(notifications) {
      const notificationsList = document.getElementById('notificationsList');
      const notificationsLoading = document.getElementById('notificationsLoading');
      const noNotifications = document.getElementById('noNotifications');
      const notificationCount = document.getElementById('notificationCount');
      
      // Ẩn loading
      notificationsLoading.style.display = 'none';
      
      // Cập nhật số lượng thông báo chưa đọc
      const unreadCount = notifications.filter(n => !n.da_doc).length;
      notificationCount.textContent = unreadCount;
      
      // Kiểm tra nếu không có thông báo
      if (notifications.length === 0) {
        noNotifications.style.display = 'flex';
        return;
      }
      
      // Ẩn thông báo "không có thông báo"
      noNotifications.style.display = 'none';
      
      // Xóa tất cả thông báo hiện tại (trừ loading và no-notifications)
      document.querySelectorAll('.notification-item').forEach(item => item.remove());
      
      // Thêm từng thông báo vào danh sách
      notifications.forEach(notification => {
        const notificationItem = document.createElement('div');
        notificationItem.className = `notification-item ${!notification.da_doc ? 'unread' : ''}`;
        notificationItem.dataset.id = notification.id;
        
        const iconClass = getNotificationIconClass(notification.loai_thong_bao);
        const iconHtml = getNotificationIcon(notification.loai_thong_bao);
        
        notificationItem.innerHTML = `
          <div class="notification-icon ${iconClass}">
            ${iconHtml}
          </div>
          <div class="notification-content">
            <div class="notification-title">${notification.tieu_de}</div>
            <div class="notification-message">${notification.noi_dung}</div>
            <div class="notification-time">${formatNotificationTime(notification.ngay_tao)}</div>
            ${notification.loai_thong_bao === 'car_registration' ? `
            <div class="notification-actions">
              <button class="notification-action-btn btn-approve" onclick="approveCar(${notification.lien_ket.split('/').pop()})">
                <i class="fas fa-check"></i> Duyệt
              </button>
              <button class="notification-action-btn btn-reject" onclick="rejectCar(${notification.lien_ket.split('/').pop()})">
                <i class="fas fa-times"></i> Từ chối
              </button>
              <button class="notification-action-btn btn-view" onclick="viewCarDetails(${notification.lien_ket.split('/').pop()})">
                <i class="fas fa-eye"></i> Xem chi tiết
              </button>
            </div>
            ` : ''}
          </div>
        `;
        
        // Thêm sự kiện click để đánh dấu đã đọc
        notificationItem.addEventListener('click', function() {
          markNotificationAsRead(notification.id);
        });
        
        // Thêm vào danh sách
        notificationsList.appendChild(notificationItem);
      });
    }
    
    // Hàm lấy danh sách thông báo
    async function fetchNotifications() {
      try {
        const response = await axios.get('/api/notifications/admin');
        notificationsData = response.data.data || [];
        renderNotifications(notificationsData);
      } catch (error) {
        console.error('Lỗi khi lấy thông báo:', error);
        document.getElementById('notificationsLoading').style.display = 'none';
        document.getElementById('noNotifications').style.display = 'flex';
        document.getElementById('noNotifications').innerHTML = `
          <i class="fas fa-exclamation-triangle"></i>
          <span>Lỗi khi tải thông báo</span>
        `;
      }
    }
    
    // Hàm đánh dấu thông báo đã đọc
    async function markNotificationAsRead(id) {
      try {
        await axios.put(`/api/notifications/${id}/read`);
        
        // Cập nhật UI
        const notification = document.querySelector(`.notification-item[data-id="${id}"]`);
        if (notification) {
          notification.classList.remove('unread');
        }
        
        // Cập nhật data
        const index = notificationsData.findIndex(n => n.id == id);
        if (index !== -1) {
          notificationsData[index].da_doc = true;
          
          // Cập nhật số lượng thông báo chưa đọc
          const unreadCount = notificationsData.filter(n => !n.da_doc).length;
          document.getElementById('notificationCount').textContent = unreadCount;
        }
      } catch (error) {
        console.error('Lỗi khi đánh dấu đã đọc:', error);
      }
    }
    
    // Hàm đánh dấu tất cả thông báo đã đọc
    async function markAllNotificationsAsRead() {
      try {
        await axios.put('/api/notifications/read-all');
        
        // Cập nhật UI
        document.querySelectorAll('.notification-item.unread').forEach(item => {
          item.classList.remove('unread');
        });
        
        // Cập nhật data
        notificationsData.forEach(notification => {
          notification.da_doc = true;
        });
        
        // Cập nhật số lượng thông báo chưa đọc
        document.getElementById('notificationCount').textContent = '0';
        
        // Hiển thị thông báo thành công
        Swal.fire({
          title: 'Thành công!',
          text: 'Đã đánh dấu tất cả thông báo là đã đọc',
          icon: 'success',
          confirmButtonText: 'Đóng',
          timer: 1500
        });
      } catch (error) {
        console.error('Lỗi khi đánh dấu tất cả đã đọc:', error);
        
        // Hiển thị thông báo lỗi
        Swal.fire({
          title: 'Lỗi!',
          text: 'Đã xảy ra lỗi khi đánh dấu tất cả thông báo là đã đọc',
          icon: 'error',
          confirmButtonText: 'Đóng'
        });
      }
    }
    
    // Xem chi tiết xe
    function viewCarDetails(carId) {
      window.location.href = `/AdminQLXe.html?view=${carId}`;
    }
    
    // Duyệt xe
    async function approveCar(carId) {
      try {
        Swal.fire({
          title: 'Xác nhận duyệt xe',
          text: 'Bạn có chắc chắn muốn duyệt xe này?',
          icon: 'question',
          showCancelButton: true,
          confirmButtonText: 'Duyệt',
          cancelButtonText: 'Hủy',
          confirmButtonColor: '#10b981',
          cancelButtonColor: '#6b7280'
        }).then(async (result) => {
          if (result.isConfirmed) {
            // Hiển thị loading
            Swal.fire({
              title: 'Đang xử lý',
              text: 'Vui lòng đợi trong giây lát...',
              allowOutsideClick: false,
              didOpen: () => {
                Swal.showLoading();
              }
            });
            
            // Gửi yêu cầu duyệt xe
            const response = await axios.put(`/api/cars/${carId}/approve`);
            
            if (response.data.success) {
              Swal.fire({
                title: 'Thành công!',
                text: 'Xe đã được duyệt thành công',
                icon: 'success',
                confirmButtonText: 'Đóng',
                timer: 1500
              });
              
              // Reload thông báo
              fetchNotifications();
            } else {
              throw new Error(response.data.message || 'Đã xảy ra lỗi');
            }
          }
        });
      } catch (error) {
        console.error('Lỗi khi duyệt xe:', error);
        
        Swal.fire({
          title: 'Lỗi!',
          text: error.response?.data?.message || 'Đã xảy ra lỗi khi duyệt xe',
          icon: 'error',
          confirmButtonText: 'Đóng'
        });
      }
    }
    
    // Từ chối xe
    async function rejectCar(carId) {
      try {
        // Hiển thị form nhập lý do từ chối
        const { value: ly_do_tu_choi } = await Swal.fire({
          title: 'Từ chối xe',
          input: 'textarea',
          inputLabel: 'Lý do từ chối',
          inputPlaceholder: 'Nhập lý do từ chối xe...',
          showCancelButton: true,
          inputValidator: (value) => {
            if (!value) {
              return 'Vui lòng nhập lý do từ chối!';
            }
          },
          confirmButtonText: 'Từ chối xe',
          cancelButtonText: 'Hủy',
          confirmButtonColor: '#f43f5e',
          cancelButtonColor: '#6b7280'
        });
        
        if (ly_do_tu_choi) {
          // Hiển thị loading
          Swal.fire({
            title: 'Đang xử lý',
            text: 'Vui lòng đợi trong giây lát...',
            allowOutsideClick: false,
            didOpen: () => {
              Swal.showLoading();
            }
          });
          
          // Gửi yêu cầu từ chối xe
          const response = await axios.put(`/api/cars/${carId}/reject`, {
            ly_do_tu_choi
          });
          
          if (response.data.success) {
            Swal.fire({
              title: 'Thành công!',
              text: 'Xe đã bị từ chối',
              icon: 'success',
              confirmButtonText: 'Đóng',
              timer: 1500
            });
            
            // Reload thông báo
            fetchNotifications();
          } else {
            throw new Error(response.data.message || 'Đã xảy ra lỗi');
          }
        }
      } catch (error) {
        console.error('Lỗi khi từ chối xe:', error);
        
        Swal.fire({
          title: 'Lỗi!',
          text: error.response?.data?.message || 'Đã xảy ra lỗi khi từ chối xe',
          icon: 'error',
          confirmButtonText: 'Đóng'
        });
      }
    }
    
    // Lấy thông báo khi trang tải xong
    document.addEventListener('DOMContentLoaded', fetchNotifications);
    
    // Gán sự kiện click cho nút đánh dấu tất cả đã đọc
    document.getElementById('markAllReadBtn').addEventListener('click', markAllNotificationsAsRead);
    
    // Cập nhật thông báo mỗi 30 giây
    setInterval(fetchNotifications, 30000);
  </script>
</body>
</html>
